/*! Rappid v1.7.1 - HTML5 Diagramming Framework - TRIAL VERSION

Copyright (c) 2015 client IO

 2016-03-03 


This Source Code Form is subject to the terms of the Rappid Trial License
, v. 2.0. If a copy of the Rappid License was not distributed with this
file, You can obtain one at http://jointjs.com/license/rappid_v2.txt
 or from the Rappid archive as was distributed by client IO. See the LICENSE file.*/


joint.layout=joint.layout||{},joint.layout.GridLayout={layout:function(a,b){b=b||{};var c=a.getElements(),d=b.columns||1,e=b.dx||0,f=b.dy||0,g=b.columnWidth||this._maxDim(c,"width")+e,h=b.rowHeight||this._maxDim(c,"height")+f,i=_.isUndefined(b.centre)||b.centre!==!1,j=!!b.resizeToFit;_.each(c,function(a,b){var c=0,k=0,l=a.get("size");if(j){var m=g-2*e,n=h-2*f,o=l.height*(l.width?m/l.width:1),p=l.width*(l.height?n/l.height:1);o>h?m=p:n=o,l={width:m,height:n},a.set("size",l)}i&&(c=(g-l.width)/2,k=(h-l.height)/2),a.set("position",{x:b%d*g+e+c,y:Math.floor(b/d)*h+f+k})})},_maxDim:function(a,b){return _.reduce(a,function(a,c){return Math.max(c.get("size")[b],a)},0)}};