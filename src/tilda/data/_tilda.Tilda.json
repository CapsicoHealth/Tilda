{
  "package": "tilda.data"
 ,"dependencies":["tilda/data/tmp/_tilda.TildaTmp.json"]
 ,"extraDDL":{
     "before":[]
    ,"after":["_tilda.Tilda.postgres.helpers-after.sql"]
   }
  
 ,"enumerations": [

    { "name": "ZoneInfo",
      "description": "blah blah",
      "id"    : { "type": "STRING", "size":  5  },
      "value" : { "type": "STRING", "size":  50 }
    }
   ]

 ,"objects":[
    { "name": "Key", "occ": false,
      "description": "The table to keep track of unique keys across distributed objects/tables",
      "columns":[
        { "name": "refnum"        , "type": "LONG"       , "nullable": false,                          "invariant": true, "description": "The primary key for this record" },
        { "name": "name"          , "type": "STRING"     , "nullable": false, "size": 128,             "invariant": true, "description": "The name of the table/object tracked" },
        { "name": "max"           , "type": "LONG"       , "nullable": false,                                             "description": "The pre-allocated max RefNum for this table/object." },
        { "name": "count"         , "type": "INTEGER"    , "nullable": false,                                             "description": "The size of the pre-allocation required by this table/object." },
        
        { "name": "created"       , "type": "DATETIME"   , "nullable": false,          "mode": "AUTO", "invariant": true, "description": "The timestamp for when the record was created.",
                                    "values": [ { "name": "Creation", "value": "NOW", "description": "Creation time"    , "default": "CREATE"} ]
        },
        { "name": "createdETL"    , "type": "DATETIME"   , "nullable": true ,          "mode": "CALCULATED",              "description": "The timestamp for when the record was ETL-created."},
        { "name": "lastUpdated"   , "type": "DATETIME"   , "nullable": false,          "mode": "AUTO",                    "description": "The timestamp for when the record was last updated.",
                                    "values": [ { "name": "Update"  , "value": "NOW", "description": "Last updated time", "default": "ALWAYS"} ]
        },
        { "name": "lastUpdatedETL", "type": "DATETIME"   , "nullable": true ,          "mode": "CALCULATED",              "description": "The timestamp for when the record was last ETL-updated."},
        { "name": "deleted"       , "type": "DATETIME"   , "nullable": true ,                                             "description": "The timestamp for when the record was deleted." }
      ],
      "primary": { "columns": ["refnum"], "autogen": false },
      "indices":[ 
      	{ "name": "Name"     , "columns": ["name"],                          "db": true },
      	{ "name": "AllByName"                     , "orderBy": ["name asc"], "db": false, "subWhere": "deleted is null" } 
      ]
    },



    { "name": "Mapping",
      "description": "Generalized Mapping table",
      "columns":[
         { "name": "type"       , "type": "STRING", "nullable": false, "size":   10, "invariant": true, "description": "The type this mapping is for" }
        ,{ "name": "src"        , "type": "STRING", "nullable": false, "size": 1024, "invariant": true, "description": "The source value for this mapping" }
        ,{ "name": "dst"        , "type": "STRING", "nullable": false, "size": 1024, "invariant": true, "description": "The the destination (mapped) value for this mapping." }
       ],
      "indices":[ 
         { "name": "TypeSrcDst", "columns": ["type", "src", "dst"], "db": true }
       ]
    },


    { "name":"ObjectPerf"
     ,"occ":true
     ,"description":"Performance logs for the Tilda framework"
     ,"columns":[
         { "name":"schemaName"   , "type":"STRING"  , "nullable":false, "size": 64, "invariant":true, "description":"The name of the schema tracked" }
        ,{ "name":"objectName"   , "type":"STRING"  , "nullable":false, "size": 64, "invariant":true, "description":"The name of the table/object tracked" }
        ,{ "name":"startPeriod"  , "type":"DATETIME", "nullable":false,             "invariant":true, "description":"The timestamp for when the record was created." }
        ,{ "name":"endPeriod"    , "type":"DATETIME", "nullable":false,                               "description":"The timestamp for when the record was created." }
        ,{ "name":"selectNano"   , "type":"LONG"    , "nullable":false, "default":"0",                "description":"Blah..." }
        ,{ "name":"selectCount"  , "type":"INTEGER" , "nullable":false, "default":"0",                "description":"Blah..." }
        ,{ "name":"selectRecords", "type":"INTEGER" , "nullable":false, "default":"0",                "description":"Blah..." }
        ,{ "name":"insertNano"   , "type":"LONG"    , "nullable":false, "default":"0",                "description":"Blah..." }
        ,{ "name":"insertCount"  , "type":"INTEGER" , "nullable":false, "default":"0",                "description":"Blah..." }
        ,{ "name":"insertRecords", "type":"INTEGER" , "nullable":false, "default":"0",                "description":"Blah..." }
        ,{ "name":"updateNano"   , "type":"LONG"    , "nullable":false, "default":"0",                "description":"Blah..." }
        ,{ "name":"updateCount"  , "type":"INTEGER" , "nullable":false, "default":"0",                "description":"Blah..." }
        ,{ "name":"updateRecords", "type":"INTEGER" , "nullable":false, "default":"0",                "description":"Blah..." }
        ,{ "name":"deleteNano"   , "type":"LONG"    , "nullable":false, "default":"0",                "description":"Blah..." }
        ,{ "name":"deleteCount"  , "type":"INTEGER" , "nullable":false, "default":"0",                "description":"Blah..." }
        ,{ "name":"deleteRecords", "type":"INTEGER" , "nullable":false, "default":"0",                "description":"Blah..." }
       ]
     ,"primary":{ "columns":["schemaName", "objectName", "startPeriod"], "autogen":false }
     ,"indices":[ 
      	 { "name":"SchemaByObjectStart", "columns":["schemaName"              ], "orderBy":["objectName", "startPeriod desc"], "db":true  }
      	,{ "name":"SchemaObjectByStart", "columns":["schemaName", "objectName"], "orderBy":["startPeriod desc"              ], "db":false }
      ]
    },
    
    { "name":"TransPerf"
     ,"occ":true
     ,"description":"Performance logs for the Tilda framework"
     ,"columns":[
	      { "name":"startPeriod"           , "type":"DATETIME"   , "nullable":false,             "invariant": true, "description":"The timestamp for when the record was created." }
         ,{ "name":"endPeriod"             , "type":"DATETIME"   , "nullable":false,                                "description":"The timestamp for when the record was created." }
         ,{ "name":"commitNano"            , "type":"LONG"       , "nullable":false, "default":"0",                 "description":"Blah..." }
         ,{ "name":"commitCount"           , "type":"INTEGER"    , "nullable":false, "default":"0",                 "description":"Blah..." }
         ,{ "name":"rollbackNano"          , "type":"LONG"       , "nullable":false, "default":"0",                 "description":"Blah..." }
         ,{ "name":"rollbackCount"         , "type":"INTEGER"    , "nullable":false, "default":"0",                 "description":"Blah..." }
         ,{ "name":"savepointSetNano"      , "type":"LONG"       , "nullable":false, "default":"0",                 "description":"Blah..." }
         ,{ "name":"savepointSetCount"     , "type":"INTEGER"    , "nullable":false, "default":"0",                 "description":"Blah..." }
         ,{ "name":"savepointCommitNano"   , "type":"LONG"       , "nullable":false, "default":"0",                 "description":"Blah..." }
         ,{ "name":"savepointCommitCount"  , "type":"INTEGER"    , "nullable":false, "default":"0",                 "description":"Blah..." }
         ,{ "name":"savepointRollbackNano" , "type":"LONG"       , "nullable":false, "default":"0",                 "description":"Blah..." }
         ,{ "name":"savepointRollbackCount", "type":"INTEGER"    , "nullable":false, "default":"0",                 "description":"Blah..." }
         ,{ "name":"statementCloseNano"    , "type":"LONG"       , "nullable":false, "default":"0",                 "description":"Blah..." }
         ,{ "name":"statementCloseCount"   , "type":"INTEGER"    , "nullable":false, "default":"0",                 "description":"Blah..." }
         ,{ "name":"connectionCloseNano"   , "type":"LONG"       , "nullable":false, "default":"0",                 "description":"Blah..." }
         ,{ "name":"connectionCloseCount"  , "type":"INTEGER"    , "nullable":false, "default":"0",                 "description":"Blah..." }
         ,{ "name":"connectionGetNano"     , "type":"LONG"       , "nullable":false, "default":"0",                 "description":"Blah..." }
         ,{ "name":"connectionGetCount"    , "type":"INTEGER"    , "nullable":false, "default":"0",                 "description":"Blah..." }
         ,{ "name":"tildaSetterNano"       , "type":"LONG"       , "nullable":false, "default":"0",                 "description":"Blah..." }
         ,{ "name":"tildaSetterCount"      , "type":"INTEGER"    , "nullable":false, "default":"0",                 "description":"Blah..." }
         ,{ "name":"tildaToStringNano"     , "type":"LONG"       , "nullable":false, "default":"0",                 "description":"Blah..." }
         ,{ "name":"tildaToStringCount"    , "type":"INTEGER"    , "nullable":false, "default":"0",                 "description":"Blah..." }
         ,{ "name":"tildaToJsonNano"       , "type":"LONG"       , "nullable":false, "default":"0",                 "description":"Blah..." }
         ,{ "name":"tildaToJsonCount"      , "type":"INTEGER"    , "nullable":false, "default":"0",                 "description":"Blah..." }
         ,{ "name":"tildaToCsvNano"        , "type":"LONG"       , "nullable":false, "default":"0",                 "description":"Blah..." }
         ,{ "name":"tildaToCsvCount"       , "type":"INTEGER"    , "nullable":false, "default":"0",                 "description":"Blah..." }
       ],
      "primary": { "columns": ["startPeriod"], "autogen": false },
      "indices":[ 
       ]
    },
    {
      "name": "Connection",
      "description": "Tilda DB Connections Configurations",
      "columns": [
		{ "name": "active",     "type": "BOOLEAN",    "nullable": true,                 "description": "Status Flag"                                },
        { "name": "id",         "type": "STRING",     "nullable": false, "size": 15,    "description": "Connection ID",        "invariant": true    },
        { "name": "driver",     "type": "STRING",     "nullable": false, "size": 100,   "description": "DB Driver"                                  },
        { "name": "db",         "type": "STRING",     "nullable": false, "size": 200,   "description": "DB Url"                                     },
        { "name": "user",       "type": "STRING",     "nullable": false, "size": 30,    "description": "DB User"                                    },
        { "name": "pswd",       "type": "STRING",     "nullable": false, "size": 40,    "description": "DB Password"                                },
        { "name": "initial",    "type": "INTEGER",    "nullable": false,                "description": "Minimum Connections"                        },
        { "name": "max",        "type": "INTEGER",    "nullable": false,                "description": "Maximum Connections"                        },
        { "name": "schemas",    "type": "STRING[]",   "nullable": false,                "description": "Schemas"                                    }
      ],
      "primary": { "columns": ["id"], "autogen": false },
      "indices": [
        { "name": "AllById", "orderBy": ["id asc"], "db": true }
      ],
      "queries": [
        {
          "name": "Active",
          "description": "All Active Connections",
          "from": [],
          "wheres": [
            { "db":"*", "clause":"active IS NOT false" }
          ],
          "orderBy": ["id asc"]
        }
      ]
      
    }
    
   ,{ "name":"Jobs",
      "description":"Jobs",
      "columns":[
        { "name":"Id"                                   , "type":"INTEGER" , "nullable": false,                 "description":"Id" },        
        { "name":"Name"                                 , "type":"STRING"  , "nullable": true,  "size":   120,  "description":"Name" },
        { "name":"StartTime"                            , "type":"DATETIME", "nullable": true,                  "description":"StartTime" },
        { "name":"EndTime"                              , "type":"DATETIME", "nullable": true,                  "description":"EndTime" },
        { "name":"TotalRecords"                         , "type":"INTEGER" , "nullable": true,                  "description":"TotalRecords" },
        { "name":"Status"                               , "type":"STRING"  , "nullable": true,  "size":   200,  "description":"Status" },
        { "name":"Error"                                , "type":"STRING"  , "nullable": true,  "size":   1000, "description":"Error" }
       ]
       ,"indices":[ 
        { "name":"Job_Id", "columns":["Id"] }
      ]         
    }, 
    { "name":"Job_Detail",
      "description":"Job Detail",
      "columns":[
        { "name":"Id"                                   , "type":"INTEGER" , "nullable": false,                 "description":"Id" },        
        { "name":"Job_Id"                               , "type":"INTEGER" , "nullable": false,                 "description":"Job Id" },       
        { "name":"FileName"                             , "type":"STRING"  , "nullable": true,  "size":   200,  "description":"FileName" },
        { "name":"FileRecords"                          , "type":"INTEGER" , "nullable": true,                  "description":"FileRecords" },
        { "name":"FileProcessStartTime"                 , "type":"DATETIME", "nullable": true,                  "description":"FileProcessStartTime" },
        { "name":"FileProcessEndTime"                   , "type":"DATETIME", "nullable": true,                  "description":"FileProcessEndTime" },
        { "name":"Status"                               , "type":"STRING"  , "nullable": true,  "size":   200,  "description":"Status" },
        { "name":"Error"                                , "type":"STRING"  , "nullable": true,  "size":   1000, "description":"Error" }
       ]
       ,"indices":[ 
        { "name":"Job_File_Id", "columns":["Id","Job_Id"] }
      ]         
    }
    
    
   ,{ "name": "RefillPerf", "occ": true,
      "description": "Performance logs for the Tilda Refills",
      "columns":[
        { "name": "schemaName"   , "type": "STRING"  , "nullable": false, "size": 64, "invariant": true, "description":"The name of the schema tracked"                    },
        { "name": "objectName"   , "type": "STRING"  , "nullable": false, "size": 64, "invariant": true, "description":"The name of the table/object tracked"              },
        { "name": "startPeriod"  , "type": "DATETIME", "nullable": false,             "invariant": true, "description":"The timestamp for when the refill started."        },
        { "name": "timeCreateMs" , "type": "LONG"    , "nullable": false,                                "description":"The time, in milliseconds, the create took."       },
        { "name": "timeIndexMs"  , "type": "LONG"    , "nullable": false,                                "description":"The time, in milliseconds, the indexing took."     },
        { "name": "timeAnalyzeMs", "type": "LONG"    , "nullable": false,                                "description":"The time, in milliseconds, the analyze took."      },
        { "name": "timeTotalMs"  , "type": "LONG"    , "nullable": false,                                "description":"The time, in milliseconds, the whole refill took." },
        { "name": "columnsMs"    , "type": "LONG"    , "nullable": false,                                "description":"The list of columns that were refilled."           }
      ]
     ,"primary": { "columns": ["schemaName", "objectName", "startPeriod"], "autogen": false }
     ,"indices":[ 
        { "name": "SchemaByObjectStart", "columns": ["schemaName"], "orderBy": ["objectName", "startPeriod desc"], "db": true },
        { "name": "SchemaObjectByStart", "columns": ["schemaName", "objectName"], "orderBy": ["startPeriod desc"], "db": false }
      ]
    }
                     
   ,{ "name": "Maintenance", "occ": true,
      "description": "Maintenance information",
      "columns":[
        { "name": "type" , "type": "STRING", "nullable": false, "size":    64, "invariant": true, "description":"The type of maintenance resource to track"        }
       ,{ "name": "name" , "type": "STRING", "nullable": false, "size":   512, "invariant": true, "description":"The name of the maintenance resource to track."   }
       ,{ "name": "value", "type": "STRING", "nullable": true , "size":500000,                    "description":"The value of the maintenance resource to track."  }
      ]
     ,"primary": { "columns": ["type", "name"], "autogen": false }
     ,"indices":[
      ]
    }
    
    
   ,{ "name":"Formula"
     ,"occ":true
     ,"description":"Master formula information"
     ,"columns":[
         { "name":"location"         , "type":"STRING"  , "nullable":false, "size":   64, "invariant":true, "description":"The name of the primary table/view this formula is defined in."  }
        ,{ "name":"location2"        , "type":"STRING"  , "nullable":false, "size":   64, "invariant":true, "description":"The name of the secondary table/view (a derived view, a realized table), if appropriate."   }
        ,{ "name":"name"             , "type":"STRING"  , "nullable":false, "size":   64,                   "description":"The name of the formula/column."  }
        ,{ "name":"type"             , "type":"STRING"  , "nullable":false, "size":    3,                   "description":"The type of the formula/column value/outcome."
                                     , "values": [ { "name":"String"   , "value":"STR", "description": "String"    }
                                                  ,{ "name":"Character", "value":"CHR", "description": "Character" }
                                                  ,{ "name":"Boolean"  , "value":"BOL", "description": "Boolean"   }
                                                  ,{ "name":"Short"    , "value":"SHT", "description": "Short"     }
                                                  ,{ "name":"Integer"  , "value":"INT", "description": "Integer"   }
                                                  ,{ "name":"Long"     , "value":"LNG", "description": "Long"      }
                                                  ,{ "name":"Float"    , "value":"FLT", "description": "Float"     }
                                                  ,{ "name":"Double"   , "value":"DBL", "description": "Double"    }
                                                  ,{ "name":"Date"     , "value":"DT" , "description": "Date"      }
                                                  ,{ "name":"DateTime" , "value":"DTM", "description": "DateTime"  }
                                                 ]
         }
        ,{ "name":"title"            , "type":"STRING"  , "nullable":false, "size":  128,                   "description":"The title of the formula/column."  }
        ,{ "name":"description"      , "type":"STRING"  , "nullable":false, "size":32000,                   "description":"The description of the formula/column."  }
        ,{ "name":"formula"          , "type":"STRING"  , "nullable":true , "size":32000,                   "description":"The formula."  }
        ,{ "name":"htmlDoc"          , "type":"STRING"  , "nullable":true , "size":32000,                   "description":"Pre-rendered html fragment with the full documentation for this formula."  }
        ,{ "name":"referencedColumns", "type":"STRING[]", "nullable":true ,                                 "description":"The list of columns this formula depends on."  }
       ]
     ,"primary": { "autogen": true }
     ,"indices":[
         { "name": "Formula", "columns": ["location" , "name"], "db": true }
        ,{ "name": "RefCols", "orderBy": ["referencedColumns"], "db": true }
      ]
    }
    
   ,{ "name":"Measure"
     ,"occ":true
     ,"description":"Master Measure information"
     ,"columns":[
         { "name":"schema"  , "type":"STRING" , "nullable":false, "size":   64,  "description":"The Schema wher ethe measure is defined."  }
        ,{ "name":"name"    , "type":"STRING" , "nullable":false, "size":   64,  "description":"The name of the measure."  }
       ]
     ,"primary": { "autogen": true }
     ,"indices":[
         { "name": "Measure", "columns": ["schema", "name"], "db": true }
      ]
    }

   ,{ "name":"MeasureFormula"
     ,"occ":true
     ,"description":"Master Measure information"
     ,"columns":[
         { "name":"measureRefnum"   , "sameas":"Measure.refnum", "invariant":true , "description":"The measure."         }
        ,{ "name":"formulaRefnum"   , "sameas":"Formula.refnum", "invariant": true, "description":"The parent formula."  }
       ]
     ,"primary": { "autogen": false, "columns": ["measureRefnum", "formulaRefnum"] }
     ,"foreign": [
         { "name":"Measure",  "srcColumns":["measureRefnum"], "destObject": "Measure" }
        ,{ "name":"Formula",  "srcColumns":["formulaRefnum"], "destObject": "Formula" }
       ]
     ,"indices":[
      ]
    }

   ,{ "name":"FormulaDependency"
     ,"occ":true
     ,"description":"Master formula dependency information"
     ,"columns":[
         { "name":"formulaRefnum"   , "sameas":"Formula.refnum", "invariant": true, "description":"The parent formula."  }
        ,{ "name":"dependencyRefnum", "sameas":"Formula.refnum", "invariant": true, "description":"The dependent formula."   }
       ]
     ,"primary": { "autogen":  false, "columns":["formulaRefnum" , "dependencyRefnum"] }
     ,"foreign": [
         { "name":"Formula1",  "srcColumns":["formulaRefnum"   ], "destObject": "Formula" }
        ,{ "name":"Formula2",  "srcColumns":["dependencyRefnum"], "destObject": "Formula" }
       ]
     ,"indices":[
       ]
    }

   ,{ "name":"FormulaResult"
     ,"occ":true
     ,"description":"Master formula result information, if applicable. Some formulas may not yield an enumeratable value (e.g., returning a date)"
     ,"columns":[
         { "name":"formulaRefnum", "sameas":"Formula.refnum",                        "invariant": true, "description":"The parent formula."  }
        ,{ "name":"value"        , "type":"STRING" , "nullable":false, "size":  100, "invariant": true, "description":"The result value."  }
        ,{ "name":"description"  , "type":"STRING" , "nullable":false, "size":32000,                    "description":"The description of the result value."  }
       ]
     ,"primary": { "autogen": false, "columns":["formulaRefnum" , "value"] }
     ,"foreign": [
         { "name":"Formula",  "srcColumns":["formulaRefnum"   ], "destObject": "Formula" }
       ]
     ,"indices":[
       ]
    }

    ,{ "name": "DependencyDDLDummyTable"
      ,"description": "A dummy Table created to generate JavaCode to handle results from the Tilda.getDependenciesDDLs() function output."
      ,"columns":[
           { "name":"srcSchemaName", "type":"STRING" , "nullable":false, "size":  100, "description":"The result value."  }
          ,{ "name":"srcTVName"    , "type":"STRING" , "nullable":false, "size":  100, "description":"The result value."  }
          ,{ "name":"seq"          , "type":"INTEGER", "nullable":false              , "description": "The blah"          }
          ,{ "name":"depSchemaName", "type":"STRING" , "nullable":false, "size":  100, "description":"The result value."  }
          ,{ "name":"depViewName"  , "type":"STRING" , "nullable":false, "size":  100, "description":"The result value."  }
          ,{ "name":"restoreScript", "type":"STRING" , "nullable":false, "size":30000, "description":"The result value."  }
       ]
      ,"indices":[
           { "name": "DepedencySequence", "columns": ["srcSchemaName" , "srcTVName", "seq"], "db": true }
          ,{ "name": "DepedencySTV"     , "columns": ["srcSchemaName" , "srcTVName", "depSchemaName", "depViewName"], "db": true }
       ]
     }    


   ,{ "name": "DateDim"
     ,"description": "The Date dimension, capturing pre-calculated metrics on dates"
     ,"columns":[
          { "name":"dt"            , "type":"DATE"   , "nullable":false, "invariant":true, "description":"The Date date"  }
         ,{ "name":"epoch"         , "type":"LONG"   , "nullable":false,             "description":"The epoch date"  }
         ,{ "name":"dayName"       , "type":"STRING" , "nullable":true , "size":255, "description":"Day name (i.e., Monday, Tuesday...) of the date"  }
         ,{ "name":"dayOfWeek"     , "type":"INTEGER", "nullable":true ,             "description":"ISO 8601 day of the week (Monday=1 to Sunday=7) of the date"  }
         ,{ "name":"dayOfMonth"    , "type":"INTEGER", "nullable":true ,             "description":"ISO 8601 day of the month (starting with 1) of the date"  }
         ,{ "name":"dayOfQuarter"  , "type":"INTEGER", "nullable":true ,             "description":"ISO 8601 day of the quarter (starting with 1) of the date"  }
         ,{ "name":"dayOfYear"     , "type":"INTEGER", "nullable":true ,             "description":"ISO 8601 day of the year (starting with 1) of the date"  }
         ,{ "name":"weekOfMonth"   , "type":"INTEGER", "nullable":true ,             "description":"ISO 8601 week of the month (starting with 1) of the date"  }
         ,{ "name":"weekOfYear"    , "type":"INTEGER", "nullable":true ,             "description":"ISO 8601 week of the year (starting with 1) of the date"  }
         ,{ "name":"monthOfYear"   , "type":"INTEGER", "nullable":true ,             "description":"ISO 8601 month of the year (starting with 1) of the date"  }
         ,{ "name":"monthName"     , "type":"STRING" , "nullable":true , "size":255, "description":"Month name (i.e., January, February...) of the date."  }
         ,{ "name":"monthNameShort", "type":"STRING" , "nullable":true , "size":255, "description":"Monday short name (i.e., Jan, Feb...) of the date."  }
         ,{ "name":"quarterOfYear" , "type":"INTEGER", "nullable":true ,             "description":"ISO 8601 quarter of the year (starting with 1) of the date."  }
         ,{ "name":"quarterName"   , "type":"STRING" , "nullable":true , "size":255, "description":"Quarter name (i.e., Q1, Q2...) of the date."  }
         ,{ "name":"year"          , "type":"INTEGER", "nullable":true ,             "description":"ISO 8601 year (1.e., 2018) of the date."  }
         ,{ "name":"mmyyyy"        , "type":"STRING" , "nullable":true , "size":  6, "description":"The mmyyyy printable version of a date."  }
         ,{ "name":"mmddyyyy"      , "type":"STRING" , "nullable":true , "size":  8, "description":"The mmddyyyy printable version of a date."  }
         ,{ "name":"yyyymmdd"      , "type":"STRING" , "nullable":true , "size":  8, "description":"The yyyymmdd sortable printable version of a date."  }
         ,{ "name":"isWeekend"     , "type":"INTEGER", "nullable":true ,             "description":"1 if this is a weekend day, 0 otherwise."  }
         ,{ "name":"isBusinessDay" , "type":"INTEGER", "nullable":true ,             "description":"1 if this is a business day, 0 otherwise."  }
         ,{ "name":"isHoliday"     , "type":"INTEGER", "nullable":true ,             "description":"1 if this is a holiday, 0 otherwise."  }
         ,{ "name":"holidayName"   , "type":"STRING" , "nullable":true , "size":255, "description":"The name of the holiday if applicable."  }
      ]
     ,"primary": { "autogen": false, "columns": ["dt"] } 
    }

   ,{ "name": "DateLimitDim"
     ,"occ":false
     ,"description": "A single row for min, max and invalid dates for the Date_Dim"
     ,"columns":[
          { "name":"invalidDate", "sameas":"DateDim.dt", "nullable":false, "description":"The invalid date"  }
         ,{ "name":"minDate"    , "sameas":"DateDim.dt", "nullable":false, "description":"The min date"  }
         ,{ "name":"maxDate"    , "sameas":"DateDim.dt", "nullable":false, "description":"The max date"  }
      ]
     ,"foreign": [
          { "name":"InvalidDt" , "srcColumns":["invalidDate" ], "destObject": "DateDim" }
         ,{ "name":"MinDt"     , "srcColumns":["minDate"     ], "destObject": "DateDim" }
         ,{ "name":"MaxDt"     , "srcColumns":["maxDate"     ], "destObject": "DateDim" }
       ]
     ,"indices": [ 
          { "name":"InvalidDate"  , "columns": ["invalidDate"] }
       ]
    }




   ,{ "name": "Testing",
      "description": "blah blah",
      "columns":[
        { "name": "refnum2"      , "type": "LONG[]"     , "nullable": false,                "invariant": true , "description": "The person's primary key" },
        { "name": "name"         , "type": "STRING"     , "nullable": false, "size":    10,                     "description": "Medical system unique enterprise id" },
        { "name": "description"  , "type": "STRING"     ,                    "size":   250,                     "description": "The title for a person, i.e., Mr, Miss, Mrs..."},
        { "name": "desc2"        , "type": "STRING"     ,                    "size":  3000,                     "description": "The title for a person, i.e., Mr, Miss, Mrs..."},
        { "name": "desc3"        , "type": "STRING"     ,                    "size":  5000,                     "description": "The title for a person, i.e., Mr, Miss, Mrs..."},
        { "name": "desc4"        , "type": "STRING"     ,                    "size":  9000,                     "description": "The title for a person, i.e., Mr, Miss, Mrs..."},
        { "name": "desc5"        , "type": "STRING"     ,                    "size": 17000,                     "description": "The title for a person, i.e., Mr, Miss, Mrs..."},
        { "name": "desc6"        , "type": "STRING"     ,                    "size": 33000, "protect":"SMART",  "description": "The title for a person, i.e., Mr, Miss, Mrs..."
                                 , "values": [ { "name":"String"   , "value":"STR", "description": "String"    }
                                              ,{ "name":"DateTime" , "value":"DTM", "description": "DateTime"  }
                                             ]
        },
        { "name": "tops"         , "type": "STRING[]"   ,                                                       "description": "The blah"},
        { "name": "tops2"        , "type": "STRING{}"   ,                                                       "description": "The blah"},
        { "name": "a1"           , "type": "BITFIELD"   ,                                                       "description": "The blah"},
        { "name": "a2"           , "type": "CHAR"       ,                                                       "description": "The blah"},
        { "name": "a2b"          , "type": "CHAR[]"     ,                                                       "description": "The blah"},
        { "name": "a2c"          , "type": "CHAR{}"     ,                                                       "description": "The blah"},
        { "name": "a3"           , "type": "BOOLEAN"    ,                                                       "description": "The blah"},
        { "name": "a3b"          , "type": "BOOLEAN[]"  ,                                                       "description": "The blah"},
        { "name": "a4"           , "type": "DOUBLE"     ,                                                       "description": "The blah"},
        { "name": "a4b"          , "type": "DOUBLE[]"   ,                                                       "description": "The blah"},
        { "name": "a5"           , "type": "FLOAT"      ,                                                       "description": "The blah"},
        { "name": "a5b"          , "type": "FLOAT[]"    ,                                                       "description": "The blah"},
        { "name": "a6"           , "type": "LONG"       ,                                                       "description": "The blah"},
        { "name": "a6b"          , "type": "LONG[]"     ,                                                       "description": "The blah"},
        { "name": "a6c"          , "type": "LONG{}"     ,                                                       "description": "The blah"},
        { "name": "a6d"          , "type": "DATETIME"   ,                                                       "description": "The blah"},
        { "name": "a7"           , "type": "INTEGER"    ,                                                       "description": "The blah"},
        { "name": "a7b"          , "type": "INTEGER[]"  ,                                                       "description": "The blah"},
        { "name": "a8"           , "type": "BINARY"     ,                                                       "description": "The blah"},
        { "name": "a8b"          , "type": "DATETIME"   ,                                                       "description": "The blah"},
        { "name": "a9"           , "type": "DATETIME"   , "default":"NOW",                                      "description": "The blah"},
        { "name": "a9a1"         , "type": "DATETIME"   , "default":"UNDEFINED",                                "description": "The blah"},
        { "name": "a9b"          , "type": "DATETIME[]" ,                                                       "description": "The blah"},
        { "name": "a9c"          , "type": "DATE"       ,                                                       "description": "The blah"},
        { "name": "a9d"          , "type": "DATE[]"     ,                                                       "description": "The blah"},
        { "name": "a10"          , "type": "SHORT"      ,                                                       "description": "The blah"},
        { "name": "a10b"         , "type": "SHORT[]"    ,                                                       "description": "The blah"},
        
        { "name": "a11"          , "type": "NUMERIC"    , "precision":10, "scale":2,                             "description": "The blah"},
        { "name": "a11b"         , "type": "NUMERIC[]"  , "precision":10, "scale":2,                             "description": "The blah"},
        { "name": "a11c"         , "type": "NUMERIC"    , "precision":10,                                        "description": "The blah"}
       /* { "name": "a11d"         , "type": "NUMERIC"    ,                                                        "description": "The blah"}*/ 
      ],
      "primary": { "autogen": true, "keyBatch": 25000 },
      "indices":[ 
        { "name": "AllByName" , "orderBy": ["name asc"], "db": false       },
        { "name": "AllByName2", "orderBy": ["name asc"], "db": true        },
        { "name": "AllByName3", "orderBy": ["name desc"], "db": true       },
        { "name": "AllByName4", "orderBy": ["name asc", "description desc"], "db": true
        																  , "subWhere": "deleted is null and name = 'Hello' and created > '2018-01-01'"
        }
      ],
      "json":[
        { "name": "AAA", "columns": ["refnum", "refnum2", "name", "description", "desc2", "desc3", "desc4", "desc5", "desc6", "tops", "tops2", "a1", "a2", "a2b", "a2c", "a3", "a3b", "a4", "a4b", "a5", "a5b", "a6", "a6b", "a6c", "a7", "a7b", "a9", "created", "lastUpdated"] }
       ,{ "name": "BBB", "columns": ["refnum", "refnum2", "name", "description", "desc2", "desc3"], "outTypes":["CSV"]}
      ],
      "outputMaps":[
        { "name": "CCC", "columns": ["refnum", "name", "description", "desc2"], "outTypes":["CSV","JSON"] }
       ,{ "name": "DDD", "columns": ["a2", "a5"], "outTypes":["NVP"], "nvpSrc":"ROWS"}
       ,{ "name": "EEE", "columns": ["a4", "a6", "name", "a7"]        , "outTypes":["NVP"], "nvpSrc":"COLUMNS", "nvpValueType":"string"}
      ],
      "http":[
        { "name": "", "mandatories": ["refnum", "name", "description"] }
      ]
    }
  ]
    
    
 ,"views": [
     { "name": "FormulaResultView"
      ,"description": "A view of formulas and their values."
      ,"columns":[
          { "sameas": "FormulaResult.formulaRefnum"}
         ,{ "sameas": "FormulaResult.value"        }
         ,{ "sameas": "FormulaResult.description"  }
         ,{ "sameas": "Formula.location"           }
         ,{ "sameas": "Formula.name"               }
        ]
      ,"subWhereX":{
          "clause":["Formula.deleted is null and FormulaResult.deleted is null"
                   ]
         ,"description":["Active formulas and their result values"]
        }
     }    

    ,{ "name": "FormulaDependencyView"
      ,"description": "A view of formulas and their direct dependencies."
      ,"columns":[
          { "sameas": "FormulaDependency.formulaRefnum"    }
         ,{ "sameas": "Formula.location"                   }
         ,{ "sameas": "Formula.name"                       }
         ,{ "sameas": "Formula.referencedColumns"          }
         ,{ "sameas": "FormulaDependency.dependencyRefnum" }
         ,{ "sameas": "Formula.name"                       , "name":"dependentFormulaName"}
         ,{ "sameas": "Formula.location"                   , "name":"dependentFormulaLocation"}
         ,{ "sameas": "Formula.referencedColumns"          , "name":"dependentReferencedColumns"}
        ]
      ,"subWhereX":{
          "clause":["Formula.deleted is null"
                   ]
         ,"description":["Active formulas and their sub-formulas"]
        }
     }

/*
    ,{ "name": "FormulaDependencyFullView"
      ,"dbOnly": true
      ,"description": "A view of formulas and their full hierarchical formula dna column dependencies."
      ,"columns":[
          { "sameas": "FormulaDependencyView.formulaRefnum"                                             }
         ,{ "sameas": "FormulaDependencyView.location"                   , "name":"formulaLocation"     }
         ,{ "sameas": "FormulaDependencyView.name"                       , "name":"formulaName"         }
         ,{ "sameas": "FormulaDependencyView.dependentReferencedColumns" , "name":"formulaDependencies" }
         ,{ "sameas": "FormulaDependencyView.referencedColumns"          , "name":"columnDependencies"  }
        ]
      ,"subWhereX":{
          "clause":["Formula.deleted is null"
                   ]
         ,"description":["Active formulas and their full hierarchical dependent formulas and columns"]
        }
     }    
*/     

    ,{ "name": "MeasureFormulaView"
      ,"description": "A view of formulas and their dependencies."
      ,"columns":[
          { "sameas": "MeasureFormula.measureRefnum"                    }
         ,{ "sameas": "Measure.schema"      , "name":"measureSchema"    }
         ,{ "sameas": "Measure.name"        , "name":"measureName"      }
         ,{ "sameas": "Formula.refnum"      , "name":"formulaRefnum"    }
         ,{ "sameas": "Formula.location"    , "name":"formulaLocation"  }
         ,{ "sameas": "Formula.location2"   , "name":"formulaLocation2" }
         ,{ "sameas": "Formula.name"        , "name":"formulaName"      }
         ,{ "sameas": "Formula.title"              }
         ,{ "sameas": "Formula.description"        }
         ,{ "sameas": "Formula.type"               }
         ,{ "sameas": "Formula.formula"            }
        ]
      ,"subWhereX":{
          "clause":["Formula.deleted is null and Measure.deleted is null"
                   ]
         ,"description":["Active formulas and their sub-formulas"]
        }
     }       
     
     
    ,{ "name": "TestingView"
      ,"description": "A test view to test aggregates."
      ,"columns":[
          { "sameas": "Testing.name"                       }
         ,{ "sameas": "Testing.lastUpdated", "joinOnly":true }
         ,{ "sameas": "Testing.refnum"   ,                   "aggregate":"COUNT"  }
         ,{ "sameas": "Testing.a2"       , "name":"a2Min"  , "aggregate":"MIN"    , "filter":"a2 is not null" , "coalesce":"AAA" }
         ,{ "sameas": "Testing.a2"       , "name":"a2Max"  , "aggregate":"MAX"    , "filter":"a2 is not null" , "coalesce":"ZZZ"}
         ,{ "sameas": "Testing.a9"       ,                   "aggregate":"ARRAY"  , "orderBy":["lastUpdated asc"] }
         ,{ "sameas": "Testing.a9c"      ,                   "aggregate":"ARRAY"}
         ,{ "sameas": "Testing.a6"       , "name":"a6First", "aggregate":"FIRST"  , "orderBy":["lastUpdated asc"] }
         ,{ "sameas": "Testing.a6"       , "name":"a6Last" , "aggregate":"LAST"   , "orderBy":["lastUpdated asc"] }
        ]
      ,"subWhereX":{
          "clause":["Testing.deleted is null"
                   ]
         ,"description":["Active test records"]
        }
     }
     
    ,{ "name": "Testing2View"
      ,"description": "A test view to test .* and exclude and block."
      ,"columns":[
          { "sameas": "Testing.refnum"                     }
         ,{ "sameas": "Testing.name"                       }
         ,{ "sameas": "Testing.lastUpdated"                }
         ,{ "sameas": "Testing.lastUpdated"                , "name":"xxxLastUpdated"}
         ,{ "sameas": "Testing.created",   "joinOnly":true }
         ,{ "sameas": "Testing.a*" 
           ,"exclude":["a2*"]
           ,"block"  :["a3", "a6*", "a9*"]
          }
         ,{ "sameas": "Testing.desc*"                      }
        ]
      ,"subWhereX":{
            "clause":["Testing.deleted is null"
                     ]
           ,"description":["Active test records"]
        }
                
      ,"formulaTemplates":[
          { "name":"Descritpion flags"
           ,"pattern":"FLAGGING"
           ,"impls": [
               { "type": "DOUBLE"
                ,"column":"desc2"
                ,"ranges":[
                    { "values":["a","b","c"], "name":"Cat1" }
                   ,{ "values":["x","y","z"], "name":"Cat2" }
                   ,{ "values":["x","y","z"], "name":"Cat3" }
                  ]
               }
             ]
          }
         ,{ "name":"Descritpion Bins"
           ,"pattern":"BINNING"
           ,"impls":[
               { "type": "DOUBLE"
                ,"column":"a7"
                ,"ranges":[
                     { "min":"0" , "maxExclusive":"10", "name":"Cat4" }
                    ,{ "min":"10", "maxExclusive":"20", "name":"Cat5" }
                  ]
               }
             ]
          }
         ,{ "name":"Nulls"
           ,"pattern":"TEMPLATE"
           ,"impls":[
               { "name":"?_null"
                ,"type":"INTEGER"
                ,"formula":[ 
                    "case when ? is null then 1"
                   ,"     when ? is not null then 0"
                   ,"end"
                  ]
                ,"values":[
                    { "value":"1"  , "description":"The value is null" }
                   ,{ "value":"0"  , "description":"The value is nmot null" }
                  ]
                ,"title":"Null ?"
                ,"description":[
                    "Whether ? is null or not"
                  ]
                ,"expansions":[
                    { "name":"a5", "title":"a5", "expr":"a5", "description":"a5" }
                   ,{ "name":"a6", "title":"a6", "expr":"a6" }
                   ,{ "name":"a7", "title":"a7" }
                   ,{ "name":"a8" }
                  ]
               }
             ]
          }
        ]          
      ,"formulaColumns":[
          { "name": "a3"
           ,"type": "BOOLEAN"
           ,"formula":[ 
               "NOT a3"
             ]
           ,"title": "Not A3"
           ,"description":[
               "Blah..."
             ]
          }
         ,{ "name": "bastille"
           ,"type": "DATETIME"
           ,"formula":[ 
               "'1789-07-14'"
             ]
           ,"title": "Bastille Day"
           ,"description":[
               "Blah..."
             ]
          }
         ,{ "name": "toto"
           ,"type": "DATETIME"
           ,"formula":[ 
               "'2018-08-10'"
             ]
           ,"title": "Last Updated"
           ,"description":[
               "Blah..."
             ]
          }
        ]
      ,"realize": {
          "indices":[ 
              { "name": "Refnum", "columns":["refnum"] }
             ,{ "name": "LastUpdated", "orderBy":["lastUpdated desc"] }
           ]
        }
     }
    ,{ "name": "Testing3View"
      ,"description": "A test view to test .* and exclude and block."
      ,"columns":[
          { "sameas": "Testing2View.refnum"      }
         ,{ "sameas": "Testing2View.name"        }
         ,{ "sameas": "Testing2View.a8b*"        }
         ,{ "sameas": "Testing2View.lastUpdated" }
         ,{ "sameas": "Testing2View.xxx*" }
        ]
      ,"realize": {
          "indices":[ 
              { "name": "Refnum", "columns":["refnum"] }
             ,{ "name": "LastUpdated", "orderBy":["lastUpdated desc"] }
           ]
        }
     }

    ,{ "name": "Testing4View"
      ,"description": "A test view to test .* and exclude and block."
      ,"columns":[
          { "sameas": "Testing2View.*"
           ,"block":["a3", "*astUpdated"]   
          }
        ]
      ,"formulaColumns":[
          { "name": "a3"
           ,"type": "BOOLEAN"
           ,"formula":[ 
               "NOT a3 OR A3"
             ]
           ,"title": "Always True"
           ,"description":[
               "Blah..."
             ]
          }
         ,{ "name": "lastUpdated"
           ,"type": "DATETIME"
           ,"formula":[ 
               "GREATEST(lastUpdated, xxxLastUpdated)"
             ]
           ,"title": "Always True"
           ,"description":[
               "Blah..."
             ]
          }
        ]
      ,"realize": {
          "indices":[ 
              { "name": "Refnum", "columns":["refnum"] }
             ,{ "name": "LastUpdated", "orderBy":["lastUpdated desc"] }
           ]
        }
     }

   ]
}
